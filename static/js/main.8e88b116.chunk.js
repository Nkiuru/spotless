(this.webpackJsonpspotless=this.webpackJsonpspotless||[]).push([[0],{104:function(e,a,t){e.exports={dot:"StatusDot_dot__1rSYH",good:"StatusDot_good__1GIEp",medium:"StatusDot_medium__3zBB3",critical:"StatusDot_critical__23vOC",neutral:"StatusDot_neutral__1H6OR",tiny:"StatusDot_tiny__33nQ5",small:"StatusDot_small__1yc1L"}},14:function(e,a,t){e.exports={titleRow:"RoomDetailsPage_titleRow__JoTlm",content:"RoomDetailsPage_content__2CxAu",card:"RoomDetailsPage_card__2J4HU",cardContent:"RoomDetailsPage_cardContent__1soEX",detailsRow:"RoomDetailsPage_detailsRow__3fj0E",row:"RoomDetailsPage_row__PCQ4C",divider:"RoomDetailsPage_divider__hWVez",semiBold:"RoomDetailsPage_semiBold__24ERR",medium:"RoomDetailsPage_medium__3Rnxk",good:"RoomDetailsPage_good__2jSxq",med:"RoomDetailsPage_med__T6SFg",critical:"RoomDetailsPage_critical__2gPiW",neutral:"RoomDetailsPage_neutral__2SrpQ",btn:"RoomDetailsPage_btn__3tYWx",map:"RoomDetailsPage_map__2yhwI",comments:"RoomDetailsPage_comments__1nTSD",comment:"RoomDetailsPage_comment__1rwNF",author:"RoomDetailsPage_author__tbk-d"}},142:function(e,a,t){e.exports={menu:"ShiftPicker_menu__1os-v",row:"ShiftPicker_row__rUGBG"}},143:function(e,a,t){e.exports={title:"AssignmentsPage_title__3UMlB",critical:"AssignmentsPage_critical__3ZemZ"}},154:function(e,a,t){e.exports={pageContainer:"PageContainer_pageContainer__iX86t",pageContent:"PageContainer_pageContent__1wPf8"}},156:function(e,a,t){e.exports={form:"LoginPage_form__38hI6",btn:"LoginPage_btn__Q93UE"}},160:function(e,a,t){e.exports={good:"CleaningReportTable_good__2fi-5",semiBold:"CleaningReportTable_semiBold__3M_nh"}},176:function(e,a,t){e.exports={autocomplete:"CleanerSelect_autocomplete__2dss4"}},192:function(e,a,t){e.exports=t(206)},197:function(e,a,t){},198:function(e,a,t){},206:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(16),l=t.n(c),o=(t(197),t(198),t(20)),i=t(6),s=t.n(i),m=t(12),u="zL43mXgXk5xa7YFRBVZscbLnGFaqVh24q5G6fhGjmAv532FAVBRtnuCJpwXWXnhw",d="https://cleaner-app-api.azurewebsites.net/api/",p=Object.freeze({OFFICE:{frequency:1,cleaningTime:5,displayName:"Office"},TOILET:{frequency:5,cleaningTime:5,displayName:"Toilet"},WARD_ROOM:{frequency:5,cleaningTime:8,displayName:"Ward room"},EXAMINATION_ROOM:{frequency:5,cleaningTime:6,displayName:"Examination room"},CORRIDOR:{frequency:3,cleaningTime:9,displayName:"Corridor"},WAITING_ROOM:{frequency:5,cleaningTime:10,displayName:"Waiting room"}}),f=function(){return null!==localStorage.getItem("user")},E=function(){var e=Object(m.a)(s.a.mark((function e(a,t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"rooms",r=a?"?hospital_id=".concat(a):"",r+=t?"?floor_id=".concat(t):"",r+=n?"?assigned_cleaners=1":"",e.abrupt("return",B("rooms",r));case 5:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B("hospitals"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(m.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B("cleaners/rooms?cleaner_id=".concat(a)));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),b=function(){var e=Object(m.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B("cleaners/rooms?room_id=".concat(a)));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),v=function(){var e=Object(m.a)(s.a.mark((function e(a,t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(a.map((function(e){return y(e._id,t)}))));case 1:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),_=function(){var e=Object(m.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(a.map((function(e){return O(e._id,e.assigned_cleaners[0]._id)}))));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),y=function(){var e=Object(m.a)(s.a.mark((function e(a,t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A("cleaners/rooms",JSON.stringify({cleaner_id:t,room_id:a})));case 1:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),O=function(){var e=Object(m.a)(s.a.mark((function e(a,t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T("cleaners/rooms",JSON.stringify({cleaner_id:t,room_id:a})));case 1:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),j=function(){var e=Object(m.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B("room?_id=".concat(a)));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),w=function(){var e=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B("cleaners/"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(m.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B("cleaner?_id=".concat(a)));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),S=function(){var e=Object(m.a)(s.a.mark((function e(a,t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A("cleaner/",JSON.stringify({name:a,shift_start:t,shift_end:n})));case 1:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(m.a)(s.a.mark((function e(a,t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a?"?room_id=".concat(a):"",n+=t?"?cleaner_id=".concat(t):"",e.abrupt("return",B("reports",n));case 3:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),N=function(){var e=Object(m.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T("cleaner",JSON.stringify({_id:a})));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),k=function(){var e=Object(m.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B("report?_id=".concat(a)));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),R=function(){var e=Object(m.a)(s.a.mark((function e(a,t){var n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d+"report/heatmap?_id=".concat(a,"&type=").concat(t),e.next=3,fetch(n,{method:"GET",headers:{"Content-Type":"application/octet-stream",Authorization:u,charset:"utf-8"}});case 3:if(!(r=e.sent).ok){e.next=8;break}return e.abrupt("return",r.arrayBuffer());case 8:return e.next=10,r.json();case 10:throw c=e.sent,console.log(c),new Error(c.error);case 13:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),P=function(){var e=Object(m.a)(s.a.mark((function e(a,t){var n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d+"room/heatmap?_id=".concat(a,"&type=").concat(t),e.next=3,fetch(n,{method:"GET",headers:{"Content-Type":"application/octet-stream",Authorization:u,charset:"utf-8"}});case 3:if(!(r=e.sent).ok){e.next=8;break}return e.abrupt("return",r.arrayBuffer());case 8:return e.next=10,r.json();case 10:throw c=e.sent,new Error(c.error);case 12:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),D=function(){var e=Object(m.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I("cleaner/",JSON.stringify({_id:a._id,name:a.name,shift_start:a.shift_start,shift_end:a.shift_end})));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),B=function(){var e=Object(m.a)(s.a.mark((function e(a,t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d+a+(t||""),console.log(n),e.next=4,fetch(n,{method:"GET",headers:{"Content-Type":"application/json",Authorization:u,charset:"utf-8"}});case 4:if(!(r=e.sent).ok){e.next=9;break}return e.abrupt("return",r.json());case 9:return e.t0=Error,e.next=12,r.json().message;case 12:throw e.t1=e.sent,new e.t0(e.t1);case 14:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),A=function(){var e=Object(m.a)(s.a.mark((function e(a,t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d+a,console.log(n),e.next=4,fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:u,charset:"utf-8"},body:t});case 4:if(!(r=e.sent).ok){e.next=9;break}return e.abrupt("return",r.json());case 9:return e.t0=Error,e.next=12,r.json().message;case 12:throw e.t1=e.sent,new e.t0(e.t1);case 14:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),T=function(){var e=Object(m.a)(s.a.mark((function e(a,t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d+a,e.next=3,fetch(n,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:u,charset:"utf-8"},body:t});case 3:if(!(r=e.sent).ok){e.next=8;break}return e.abrupt("return",r.json());case 8:return e.t0=Error,e.next=11,r.json().message;case 11:throw e.t1=e.sent,new e.t0(e.t1);case 13:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),I=function(){var e=Object(m.a)(s.a.mark((function e(a,t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d+a,console.log(n),e.next=4,fetch(n,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:u,charset:"utf-8"},body:t});case 4:if(!(r=e.sent).ok){e.next=9;break}return e.abrupt("return",r.json());case 9:return e.t0=Error,e.next=12,r.json().message;case 12:throw e.t1=e.sent,new e.t0(e.t1);case 14:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),M=t(8),z=t(83),H=t(154),F=t.n(H),L=function(e){var a=e.children,t=e.style,n=e.noToolbar?0:"48px";return r.a.createElement("div",{className:F.a.pageContainer,style:{top:n}},r.a.createElement("div",{className:F.a.pageContent,style:t},a))},q=t(80),W=t.n(q),G=t(266),Y=function(e){var a=e.value,t=e.subtitle,n=e.color;return r.a.createElement("div",{className:W.a.stat},r.a.createElement("div",{className:W.a.keyStat},r.a.createElement(z.a,{variant:"h3",style:{color:n}},a)),r.a.createElement(z.a,{variant:"body2",className:W.a.subtitle},t))},U=function(){var e=Object(n.useState)(""),a=Object(M.a)(e,2),t=a[0],c=a[1];return Object(n.useEffect)((function(){var e=!!f()&&JSON.parse(localStorage.getItem("user"));c(e)}),[]),r.a.createElement(L,{style:{textAlign:"start"}},r.a.createElement(z.a,{variant:"h4",style:{marginBottom:16}},"Hello ",t&&t.username,"!"),r.a.createElement(G.a,{container:!0,spacing:6},r.a.createElement(G.a,{item:!0,xs:5},r.a.createElement(z.a,{variant:"h5",className:W.a.semiBold},"Alerts"),r.a.createElement(z.a,{variant:"h6",style:{marginTop:16},className:W.a.semiBold},"No active alerts")),r.a.createElement(G.a,{item:!0,xs:3},r.a.createElement(G.a,{container:!0,spacing:4},r.a.createElement(G.a,{item:!0,xs:!0},r.a.createElement(Y,{subtitle:"Rooms cleaned today",value:1,color:"#27AE60"})),r.a.createElement(G.a,{item:!0,xs:!0},r.a.createElement(Y,{subtitle:"Average contamination index",value:50,color:"#F2C94C"})),r.a.createElement(G.a,{item:!0,xs:!0},r.a.createElement(Y,{subtitle:"Green rooms",value:0,color:"#27AE60"})),r.a.createElement(G.a,{item:!0,xs:!0},r.a.createElement(Y,{subtitle:"Red rooms",value:4,color:"#EB5757"})))),r.a.createElement(G.a,{item:!0,xs:4})))},J=t(37),X=t(18),V=t(268),Q=t(51),K=t(180),Z=t(156),$=t.n(Z),ee=Q.a({username:Q.b().required("Username is required"),password:Q.b().required("Password is required")}),ae=function(){var e=Object(o.g)();return r.a.createElement(L,{noToolbar:!0},r.a.createElement(K.a,{variant:"elevation",className:$.a.form},r.a.createElement(X.c,{initialValues:{username:"",password:""},onSubmit:function(a,t){t.setSubmitting;console.log(a),function(e,a){var t=!1;"superadmin"===e&&"admin"===a&&(t=!0),localStorage.setItem("user",JSON.stringify({username:e,superAdmin:t}))}(a.username,a.password),e.push("/dashboard")},validationSchema:ee},(function(e){e.isSubmitting,e.resetForm,e.values;return r.a.createElement(X.b,null,r.a.createElement(G.a,{container:!0,spacing:2},r.a.createElement(G.a,{item:!0,xs:12},r.a.createElement(z.a,{variant:"h4"},"Login to spotless")),r.a.createElement(G.a,{item:!0,xs:12},r.a.createElement(X.a,{component:J.b,autoFocus:!0,variant:"outlined",margin:"dense",id:"name",label:"Username",type:"text",name:"username",fullWidth:!0})),r.a.createElement(G.a,{item:!0,xs:12},r.a.createElement(X.a,{component:J.b,variant:"outlined",margin:"dense",id:"name",label:"Password",type:"password",name:"password",fullWidth:!0}))),r.a.createElement(V.a,{type:"submit",color:"primary",variant:"contained",className:$.a.btn},"Sign in"))}))))},te=t(269),ne=t(213),re=t(319),ce=t(272),le=t(273),oe=t(274),ie=t(275),se=t(276),me=t(277),ue=t(278),de=t(279),pe=t(280),fe=t(270),Ee=t(281),ge=t(82),he=t.n(ge),be=t(318),ve=t(315),_e=t(271),ye=t(116),Oe=t(320),je=t(142),we=t.n(je),xe=function(){return r.a.createElement(G.a,{item:!0,xs:!0,className:we.a.row},r.a.createElement("div",null,r.a.createElement(z.a,{variant:"body1"},"Shift start"),r.a.createElement("div",{className:we.a.row},r.a.createElement(X.a,{component:J.a,name:"startHour"},Object(ye.a)(Array(24).keys()).map((function(e){var a=e.toString().padStart(2,"0");return r.a.createElement(Oe.a,{key:e,value:a},a)}))),r.a.createElement(z.a,{variant:"h6"},":"),r.a.createElement(X.a,{component:J.a,name:"startMinutes"},["00",15,30,45].map((function(e){return r.a.createElement(Oe.a,{key:e,value:e.toString()},e)}))))),r.a.createElement(z.a,{variant:"h4",style:{margin:"0 16px"}},"-"),r.a.createElement("div",null,r.a.createElement(z.a,{variant:"body1"},"Shift end"),r.a.createElement("div",{className:we.a.row},r.a.createElement(X.a,{component:J.a,name:"endHour"},Object(ye.a)(Array(23).keys()).map((function(e){return r.a.createElement(Oe.a,{key:e,value:e.toString()},e)}))),r.a.createElement(z.a,{variant:"body1"},":"),r.a.createElement(X.a,{component:J.a,name:"endMinutes"},["00",15,30,45].map((function(e){return r.a.createElement(Oe.a,{key:e,value:e.toString()},e)}))))))},Se=Q.a({firstName:Q.b().required("First name is required"),lastName:Q.b().required("Last name is required")}),Ce=function(e){var a=e.open,t=e.setOpen,n=e.setIsLoaded,c=e.setSnackOpen,l=function(){t(!1)},o=function(){var e=Object(m.a)(s.a.mark((function e(a,r){var l,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=r.setSubmitting,e.next=3,S("".concat(a.firstName," ").concat(a.lastName),"".concat(a.startHour.padStart(2,"0"),":").concat(a.startMinutes.padStart(2,"0")),"".concat(a.endHour.padStart(2,"0"),":").concat(a.endMinutes.padStart(2,"0")));case 3:o=e.sent,console.log(o),n(!1),l(!1),c(!0),t(!1);case 9:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}();return r.a.createElement(re.a,{open:a,onClose:l,"aria-labelledby":"form-dialog-title"},r.a.createElement(ce.a,{id:"form-dialog-title"},"Create a new cleaner"),r.a.createElement(X.c,{initialValues:{firstName:"",lastName:"",startHour:"08",endHour:"16",startMinutes:"00",endMinutes:"00"},onSubmit:o,validationSchema:Se},(function(e){e.isSubmitting,e.resetForm,e.values;return r.a.createElement(X.b,null,r.a.createElement(le.a,null,r.a.createElement(G.a,{container:!0,spacing:2},r.a.createElement(G.a,{item:!0,xs:6},r.a.createElement(X.a,{component:J.b,autoFocus:!0,margin:"dense",id:"name",label:"First name",type:"text",name:"firstName",fullWidth:!0})),r.a.createElement(G.a,{item:!0,xs:6},r.a.createElement(X.a,{component:J.b,margin:"dense",id:"name",label:"Last name",type:"text",name:"lastName",fullWidth:!0})),r.a.createElement(xe,null))),r.a.createElement(oe.a,null,r.a.createElement(V.a,{onClick:l,color:"primary"},"Cancel"),r.a.createElement(V.a,{type:"submit",color:"primary"},"Create cleaner")))})))},Ne=function(e){var a=e.cleaners,t=Object(o.g)();return r.a.createElement(ie.a,{component:K.a},r.a.createElement(se.a,{size:"small"},r.a.createElement(me.a,null,r.a.createElement(ue.a,null,r.a.createElement(de.a,null,"Name"),r.a.createElement(de.a,{align:"right"},"Shift start"),r.a.createElement(de.a,{align:"right"},"Shift end"),r.a.createElement(de.a,{align:"right"},"Cleaning percent"),r.a.createElement(de.a,{align:"right"},"Current location"),r.a.createElement(de.a,{align:"right"},"Status"),r.a.createElement(de.a,null,"Action"))),r.a.createElement(pe.a,null,a.map((function(e){return r.a.createElement(ue.a,{key:e._id},r.a.createElement(de.a,{component:"th",scope:"row"},e.name),r.a.createElement(de.a,{align:"right"},e.shift_start),r.a.createElement(de.a,{align:"right"},e.shift_end),r.a.createElement(de.a,{align:"right"}),r.a.createElement(de.a,{align:"right"}),r.a.createElement(de.a,{align:"right"}),r.a.createElement(de.a,null,r.a.createElement(ne.a,{size:"small",color:"secondary",onClick:function(){!function(e){var a=e._id;t.push({pathname:"/cleaners/".concat(a),state:{id:a}})}(e)}},r.a.createElement(Ee.a,null))))})))))},ke=function(){var e=Object(n.useState)([]),a=Object(M.a)(e,2),t=a[0],c=a[1],l=Object(n.useState)(!1),o=Object(M.a)(l,2),i=o[0],s=o[1],m=r.a.useState(!1),u=Object(M.a)(m,2),d=u[0],p=u[1],f=Object(n.useState)(!1),E=Object(M.a)(f,2),g=E[0],h=E[1];Object(n.useEffect)((function(){w().then((function(e){console.log(e),c(e),s(!0)}),(function(e){console.log(e)}))}),[p,i]);var b=function(e,a){"clickaway"!==a&&h(!1)};return r.a.createElement(L,{style:{textAlign:"start"}},r.a.createElement("div",{className:he.a.headerRow},r.a.createElement(z.a,{variant:"h5",className:he.a.bold},"Cleaners"),r.a.createElement(te.a,{title:"Add cleaner"},r.a.createElement(ne.a,{onClick:function(){return p(!0)}},r.a.createElement(fe.a,null)))),i?r.a.createElement(Ne,{cleaners:t}):r.a.createElement(_e.a,{color:"secondary",style:{margin:"16px auto"}}),r.a.createElement(z.a,{variant:"h5",className:he.a.bold,style:{marginTop:24}},"Unassigned rooms"),r.a.createElement(Ce,{open:d,setOpen:p,setIsLoaded:s,setSnackOpen:h}),r.a.createElement(be.a,{open:g,autoHideDuration:6e3,onClose:b,anchorOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(ve.a,{variant:"filled",severity:"success",onClose:b},"Cleaner created")))},Re=t(313),Pe=t(282),De=t(283),Be=t(285),Ae=t(17),Te=t(4),Ie=t(47),Me=t.n(Ie),ze=t(284),He=t(286),Fe=t(287),Le=t(288),qe=t(289),We=t(290),Ge=t(291),Ye=Object(Te.a)({root:{width:"100%",flexGrow:1},indicator:{display:"flex",justifyContent:"center",backgroundColor:"transparent",marginBottom:"4px","& > span":{width:"40%",backgroundColor:"#00b0ff",borderTopLeftRadius:4,borderTopRightRadius:4}}})((function(e){return r.a.createElement(Re.a,Object.assign({},e,{TabIndicatorProps:{children:r.a.createElement("span",null)}}))})),Ue=function(){var e=Object(o.h)(),a=Object(o.g)(),t=function(e,a){return function(t){return Object(o.f)(e.pathname,{path:t,exact:!1,strict:!1})?a:-1}}(e,"myTabId");return r.a.createElement(Pe.a,{position:"static"},r.a.createElement(De.a,{variant:"dense"},r.a.createElement("div",{className:Me.a.toolbar},e.pathname.split("/").length>2?r.a.createElement(te.a,{title:"Go Back"},r.a.createElement(ne.a,{onClick:function(){a.goBack()}},r.a.createElement(ze.a,{className:Me.a.svg}))):r.a.createElement("div",{style:{width:40}}),r.a.createElement(z.a,{variant:"h6",className:Me.a.name},"Spotless")),r.a.createElement(Ye,{variant:"fullWidth",value:"myTabId"},r.a.createElement(Be.a,{label:r.a.createElement("div",{className:Me.a.tab},r.a.createElement(He.a,{fontSize:"small"})," Dashboard"),value:t("/dashboard"),component:Ae.b,to:"/dashboard",disableRipple:!0}),r.a.createElement(Be.a,{label:r.a.createElement("div",{className:Me.a.tab},r.a.createElement(Fe.a,{fontSize:"small"})," Assignments"),value:t("/assignments"),component:Ae.b,to:"/assignments",disableRipple:!0,className:Me.a.tab}),r.a.createElement(Be.a,{label:r.a.createElement("div",{className:Me.a.tab},r.a.createElement(Le.a,{fontSize:"small"})," Cleaners"),value:t("/cleaners"),component:Ae.b,to:"/cleaners",disableRipple:!0,className:Me.a.tab}),r.a.createElement(Be.a,{label:r.a.createElement("div",{className:Me.a.tab},r.a.createElement(qe.a,{fontSize:"small"})," Rooms"),value:t("/rooms"),component:Ae.b,to:"/rooms",disableRipple:!0}),r.a.createElement(Be.a,{label:r.a.createElement("div",{className:Me.a.tab},r.a.createElement(We.a,{fontSize:"small"})," Analysis"),value:t("/analysis"),component:Ae.b,to:"/analysis",disableRipple:!0,className:Me.a.tab})),r.a.createElement(te.a,{title:"Sign out",color:"secondary"},r.a.createElement(ne.a,{onClick:function(){localStorage.removeItem("user"),a.push("/")}},r.a.createElement(Ge.a,null)))))},Je=function(){return r.a.createElement("div",null,"Analysis")},Xe=t(209),Ve=t(217),Qe=t(216),Ke=t(45),Ze=t.n(Ke),$e=t(104),ea=t.n($e),aa=function(e){var a=e.variant,t=e.size,n=e.tooltip,c=[ea.a.dot];return c.push(a?ea.a[a]:ea.a.neutral),c.push(t?ea.a[t]:ea.a.small),r.a.createElement(te.a,{title:n},r.a.createElement("div",{className:c.join(" ")}))},ta=function(e,a){return"<empty>"!==e.room_type?p[e.room_type][a]:""},na=function(e){var a="neutral";return e>=60?a="critical":e>=30?a="medium":e<30&&(a="good"),r.a.createElement(aa,{variant:a,size:"tiny",tooltip:e})};function ra(e,a,t){var n=null;try{n=new BigUint64Array(e)}catch(h){throw h}var r=function(e){for(var a,t,n,r,c=BigInt(Number.MAX_SAFE_INTEGER),l=BigInt(0),o=0;o<e.length;o++)(n=e[o])<c&&(c=n),n>l&&(l=n);var i=[];(t=BigInt(l))<=(a=BigInt(c))&&(t=a+1n);for(var s=0;s<e.length;s++)(r=255n*(e[s]-a)/(t-a))>255n&&(r=255),r<0n&&(r=0n),i.push(Number(r));return new Uint8Array(i)}(n),c=function(){for(var e,a,t,n,r,c=[],l=[],o=[],i=0;i<=255;i++)n=.01236846501*i,r=Math.cos(n-1),e=Math.round(200*Math.pow(2,Math.sin(n-1.6))),a=Math.round(Math.atan(n)*r*155+100),t=Math.round(255*r),e=Math.min(255,e),a=Math.min(255,a),t=Math.min(255,t),e=Math.max(0,e),a=Math.max(0,a),t=Math.max(0,t),c.push(e),l.push(a),o.push(t);return[new Uint8ClampedArray(c),new Uint8ClampedArray(l),new Uint8ClampedArray(o)]}(),l=Object(M.a)(c,3),o=l[0],i=l[1],s=l[2],m=null,u=null,d=r.length/72;if(r){u=(m=new ImageData(72,d)).data;for(var p=0,f=0;f<u.length;f+=4){var E=r[p];u[f]=o[E],u[f+1]=i[E],u[f+2]=s[E],u[f+3]=255,p++}}console.log(m);var g=t.getContext("2d");a.getContext("2d").putImageData(m,0,0),g.drawImage(a,0,0),t.style="transform: scale(1, 1); flex: 0"}var ca=function(e){var a=e.rooms,t=Object(o.g)();return r.a.createElement(ie.a,{component:K.a},r.a.createElement(se.a,{size:"small"},r.a.createElement(me.a,null,r.a.createElement(ue.a,null,r.a.createElement(de.a,null,"Name"),r.a.createElement(de.a,{align:"right"},"Building"),r.a.createElement(de.a,{align:"right"},"Floor"),r.a.createElement(de.a,{align:"right"},"Contamination index"),r.a.createElement(de.a,{align:"right"},"Has Patient"),r.a.createElement(de.a,{align:"right"},"Room type"),r.a.createElement(de.a,{align:"right"},"Last cleaned"),r.a.createElement(de.a,null,"Action"))),r.a.createElement(pe.a,null,a.map((function(e){return r.a.createElement(ue.a,{key:e._id},r.a.createElement(de.a,{component:"th",scope:"row"},e.name),r.a.createElement(de.a,{align:"right"},e.building),r.a.createElement(de.a,{align:"right"},e.floor),r.a.createElement(de.a,{align:"right"},e.contamination_index),r.a.createElement(de.a,{align:"right"},"<empty>"===e.patient?"No":"Yes"),r.a.createElement(de.a,{align:"right"},ta(e,"displayName")),r.a.createElement(de.a,{align:"right"},(a=e.last_cleaned)?Ze()(a).format("YYYY-MM-DD HH:mm:ss"):"Never"),r.a.createElement(de.a,null,r.a.createElement(ne.a,{size:"small",color:"secondary",onClick:function(){!function(e){var a=e._id;t.push({pathname:"/rooms/".concat(a),state:{id:a}})}(e)}},r.a.createElement(Ee.a,null))));var a})))))},la=function(){var e=Object(n.useState)(null),a=Object(M.a)(e,2),t=a[0],c=a[1],l=Object(n.useState)(!1),o=Object(M.a)(l,2),i=o[0],s=o[1],m=Object(n.useState)([]),u=Object(M.a)(m,2),d=u[0],p=u[1],f=Object(n.useState)([]),h=Object(M.a)(f,2),b=h[0],v=h[1],_=Object(n.useState)(""),y=Object(M.a)(_,2),O=y[0],j=y[1];Object(n.useEffect)((function(){g("hospital0").then((function(e){console.log(e),s(!0),v(e)}),(function(e){c(!0),s(!0),console.log(e)}))}),[]);return r.a.createElement(L,null,r.a.createElement("div",{className:he.a.headerRow},r.a.createElement(z.a,{variant:"h5",className:he.a.bold},"Rooms"),i?r.a.createElement(Xe.a,{variant:"outlined",style:{minWidth:"320px",margin:"8px"}},r.a.createElement(Ve.a,{id:"demo-simple-select-outlined-label"},"Select hospital"),r.a.createElement(Qe.a,{label:"Select Hospital",onChange:function(e){j(e.target.value),E(e.target.value._id).then((function(e){console.log(e),p(e)}),(function(e){c(!0),s(!0),console.log(e)}))},value:O},r.a.createElement(Oe.a,{value:{}},r.a.createElement("em",null,"None")),b.map((function(e){return r.a.createElement(Oe.a,{value:e,key:e._id},e.name)})))):r.a.createElement(_e.a,{color:"secondary"})),d.length>0&&r.a.createElement(ca,{rooms:d}),t&&r.a.createElement("p",null,"ERROR"))},oa=t(136),ia=t(3),sa=t(292),ma=t(9),ua=t(317),da=t(321),pa=t(322),fa=t(293),Ea=t(294);function ga(e,a,t){return void 0===e[t]?1:a[t]<e[t]?-1:a[t]>e[t]?1:0}var ha=t(143),ba=t.n(ha),va=t(159),_a=t(314),ya=t(267),Oa=t(176),ja=t.n(Oa),wa=function(e){var a=e.onChange,t=e.style,c=Object(n.useState)([]),l=Object(M.a)(c,2),o=l[0],i=l[1],u=Object(n.useState)(!1),d=Object(M.a)(u,2),p=d[0],f=d[1],E=Object(n.useState)(null),g=Object(M.a)(E,2),h=g[0],b=g[1],v=p&&0===o.length;Object(n.useEffect)((function(){var e=!0;if(v)return Object(m.a)(s.a.mark((function a(){var t;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w();case 2:t=a.sent,e&&i(t);case 4:case"end":return a.stop()}}),a)})))(),function(){e=!1}}),[v]);return r.a.createElement(_a.a,{open:p,onOpen:function(){f(!0)},onClose:function(){f(!1)},className:ja.a.autocomplete,style:t,getOptionLabel:function(e){return e.name||""},options:o,loading:v,value:h,onChange:function(e,t){b(t),a(e,t)},renderInput:function(e){return r.a.createElement(ya.a,Object.assign({},e,{label:"Cleaner",variant:"outlined",InputProps:Object(va.a)(Object(va.a)({},e.InputProps),{},{endAdornment:r.a.createElement(r.a.Fragment,null,v?r.a.createElement(_e.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}})},xa=function(e){var a=e.open,t=e.setOpen,c=e.selected,l=e.setSnackOpen,o=e.onClose,i=e.setSnackText,u=Object(n.useState)(null),d=Object(M.a)(u,2),p=d[0],f=d[1],E=function(){o(),t(!1)},g=function(){var e=Object(m.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=c.filter((function(e){return e.assigned_cleaners.length>0}))).length>0)){e.next=4;break}return e.next=4,_(a);case 4:return e.next=6,v(c,p._id);case 6:i("Cleaner assigned"),l(!0),E();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(re.a,{open:a,onClose:E,"aria-labelledby":"form-dialog-title",disableBackdropClick:!0},r.a.createElement(ce.a,{id:"form-dialog-title"},"Select a cleaner"),r.a.createElement(le.a,null,r.a.createElement(wa,{onChange:function(e,a){f(a)}})),r.a.createElement(oe.a,null,r.a.createElement(V.a,{onClick:E,color:"primary"},"Cancel"),r.a.createElement(V.a,{color:"primary",onClick:g,disabled:""===p},"Assign")))},Sa=t(295),Ca=[{id:"name",numeric:!1,disablePadding:!0,label:"Name"},{id:"building",numeric:!0,disablePadding:!1,label:"Building"},{id:"floor",numeric:!0,disablePadding:!1,label:"Floor"},{id:"cleaner",numeric:!1,disablePadding:!1,label:"Assigned Cleaner"},{id:"status",numeric:!1,disablePadding:!1,label:"Status"},{id:"contamination_index",numeric:!0,disablePadding:!1,label:"Contamination index"},{id:"room_type",numeric:!1,disablePadding:!1,label:"Room type"},{id:"last_cleaned",numeric:!0,disablePadding:!1,label:"Last cleaned"},{id:"action",numeric:!0,disablePadding:!1,label:"Action"}];function Na(e){var a=e.classes,t=e.onSelectAllClick,n=e.order,c=e.orderBy,l=e.numSelected,o=e.rowCount,i=e.onRequestSort;return r.a.createElement(me.a,null,r.a.createElement(ue.a,null,r.a.createElement(de.a,{padding:"checkbox"},r.a.createElement(ua.a,{indeterminate:l>0&&l<o,checked:o>0&&l===o,onChange:t,inputProps:{"aria-label":"select all desserts"}})),Ca.map((function(e){return r.a.createElement(de.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:c===e.id&&n},r.a.createElement(da.a,{active:c===e.id,direction:c===e.id?n:"asc",onClick:(t=e.id,function(e){i(e,t)})},e.label,c===e.id?r.a.createElement("span",{className:a.visuallyHidden},"desc"===n?"sorted descending":"sorted ascending"):null));var t}))))}var ka=Object(sa.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1),textAlign:"left"},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(ma.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark}}})),Ra=function(e){var a=ka(),t=e.numSelected,n=e.selected,c=e.setSelected,l=e.setSnackOpen,o=e.setSnackText,i=e.getData,u=r.a.useState(!1),d=Object(M.a)(u,2),p=d[0],f=d[1],E=n.filter((function(e){return e.assigned_cleaners.length>0})),g=function(){var e=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(E);case 2:o("Cleaner unassigned"),l(!0),c([]),i(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(De.a,{className:Object(ia.a)(a.root,Object(oa.a)({},a.highlight,t>0))},t>0?r.a.createElement(z.a,{className:ba.a.title,color:"inherit",variant:"subtitle1",component:"div",style:{fontWeight:600}},t," selected"):r.a.createElement(z.a,{className:ba.a.title,variant:"h5",id:"tableTitle",component:"div",style:{fontWeight:"600"}},"Assign rooms to cleaner"),t>0?r.a.createElement(r.a.Fragment,null,E.length>0&&r.a.createElement(te.a,{title:"Remove room assignments"},r.a.createElement(V.a,{variant:"contained",startIcon:r.a.createElement(fa.a,null),className:ba.a.critical,style:{flexBasis:"300px",marginRight:32},onClick:g},"Remove assignments")),r.a.createElement(te.a,{title:"Assign to cleaner"},r.a.createElement(V.a,{variant:"contained",color:"secondary",style:{flexBasis:"180px"},onClick:function(){f(!0)}},"Assign rooms"))):r.a.createElement(te.a,{title:"Filter list"},r.a.createElement(ne.a,{"aria-label":"filter list",onClick:function(){}},r.a.createElement(Ea.a,null))),r.a.createElement(xa,{open:p,setOpen:f,selected:n,onClose:function(){c([]),i(!0)},setSnackOpen:l,setSnackText:o}))},Pa=Object(sa.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));var Da=function(){var e=Pa(),a=r.a.useState("asc"),t=Object(M.a)(a,2),c=t[0],l=t[1],i=r.a.useState("name"),s=Object(M.a)(i,2),m=s[0],u=s[1],d=r.a.useState([]),p=Object(M.a)(d,2),f=p[0],g=p[1],h=r.a.useState(0),b=Object(M.a)(h,2),v=b[0],_=b[1],y=r.a.useState(25),O=Object(M.a)(y,2),j=O[0],w=O[1],x=Object(n.useState)(!1),S=Object(M.a)(x,2),C=S[0],N=S[1],k=Object(n.useState)([]),R=Object(M.a)(k,2),P=R[0],D=R[1],B=Object(n.useState)(!1),A=Object(M.a)(B,2),T=A[0],I=A[1],z=Object(n.useState)(""),H=Object(M.a)(z,2),F=H[0],q=H[1],W=r.a.useState(!0),G=Object(M.a)(W,2),Y=G[0],U=G[1],J=Object(o.g)();Object(n.useEffect)((function(){Y&&E(null,null,!0).then((function(e){console.log(e),D(e),N(!0),U(!1)}),(function(e){N(!0),console.log(e)}))}),[Y]);var X=function(e,a){"clickaway"!==a&&I(!1)};return r.a.createElement(L,{className:e.root},C?r.a.createElement(K.a,{className:e.paper},r.a.createElement(Ra,{numSelected:f.length,selected:f,setSnackOpen:I,setSelected:g,setSnackText:q,getData:U}),r.a.createElement(ie.a,null,r.a.createElement(se.a,{className:e.table,"aria-labelledby":"tableTitle","aria-label":"enhanced table",size:"small"},r.a.createElement(Na,{classes:e,numSelected:f.length,order:c,orderBy:m,onSelectAllClick:function(e){if(e.target.checked){var a=P.map((function(e){return e}));g(a)}else g([])},onRequestSort:function(e,a){l(m===a&&"asc"===c?"desc":"asc"),u(a)},rowCount:P.length}),r.a.createElement(pe.a,null,function(e,a){var t=e.map((function(e,a){return[e,a]}));return t.sort((function(e,t){var n=a(e[0],t[0]);return 0!==n?n:e[1]-t[1]})),t.map((function(e){return e[0]}))}(P,function(e,a){return"desc"===e?function(e,t){return ga(e,t,a)}:function(e,t){return-ga(e,t,a)}}(c,m)).slice(v*j,v*j+j).map((function(e,a){var t,n,c=(t=e,-1!==f.indexOf(t)),l="enhanced-table-checkbox-".concat(a);return r.a.createElement(ue.a,{hover:!0,onClick:function(a){return function(e,a,t,n){var r=t.indexOf(a),c=[];-1===r?c=c.concat(t,a):0===r?c=c.concat(t.slice(1)):r===t.length-1?c=c.concat(t.slice(0,-1)):r>0&&(c=c.concat(t.slice(0,r),t.slice(r+1))),n(c)}(0,e,f,g)},role:"checkbox","aria-checked":c,tabIndex:-1,key:e.name,selected:c,style:{height:"33px"}},r.a.createElement(de.a,{padding:"checkbox"},r.a.createElement(ua.a,{checked:c,inputProps:{"aria-labelledby":l}})),r.a.createElement(de.a,{component:"th",id:l,scope:"row",padding:"none"},e.name),r.a.createElement(de.a,{align:"right"},e.building),r.a.createElement(de.a,{align:"right"},e.floor),r.a.createElement(de.a,null,function(e){var a=e.assigned_cleaners,t=a.length>0&&a[0];return t?r.a.createElement(Sa.a,{component:Ae.b,color:"secondary",to:{pathname:"/cleaners/".concat(t._id),state:{id:t._id}}},t.name):"-"}(e)),r.a.createElement(de.a,null,na(e.contamination_index)),r.a.createElement(de.a,{align:"right"},e.contamination_index),r.a.createElement(de.a,null,ta(e,"displayName")),r.a.createElement(de.a,{align:"right"},(n=e.last_cleaned)?Ze()(n).format("YYYY-MM-DD HH:mm:ss"):"Never"),r.a.createElement(de.a,{align:"right"},r.a.createElement(ne.a,{color:"secondary",size:"small",onClick:function(){!function(e){var a=e._id;J.push({pathname:"/rooms/".concat(a),state:{id:a}})}(e)}},r.a.createElement(Ee.a,null))))}))))),r.a.createElement(pa.a,{rowsPerPageOptions:[5,10,25,50],component:"div",count:P.length,rowsPerPage:j,page:v,onChangePage:function(e,a){_(a)},onChangeRowsPerPage:function(e){w(parseInt(e.target.value,10)),_(0)}})):r.a.createElement(_e.a,{color:"secondary",style:{margin:"16px auto"}}),r.a.createElement(be.a,{open:T,autoHideDuration:6e3,onClose:X,anchorOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(ve.a,{variant:"filled",severity:"success",onClose:X},F)))},Ba=t(14),Aa=t.n(Ba),Ta=t(296),Ia=t(297),Ma=function(e){var a=e.room;return r.a.createElement(Ta.a,{className:Aa.a.card},r.a.createElement("div",{className:Aa.a.cardContent},r.a.createElement(z.a,{variant:"h6",className:Aa.a.semiBold},"Room details"),r.a.createElement(Ia.a,{light:!0,className:Aa.a.divider}),r.a.createElement(z.a,{variant:"body1",className:Aa.a.semiBold},"Building ",a.building),r.a.createElement(z.a,{variant:"body2",className:Aa.a.medium,color:"textSecondary"},"Floor ",a.floor),r.a.createElement(Ia.a,{light:!0,className:Aa.a.divider}),r.a.createElement("div",{className:Aa.a.row},r.a.createElement(z.a,{variant:"body1",className:Aa.a.semiBold},ta(a,"displayName")),r.a.createElement(z.a,{variant:"body2",className:Aa.a.semiBold},"Cleaning time: ",ta(a,"cleaningTime")," min")),r.a.createElement(z.a,{variant:"body2",className:Aa.a.medium,color:"textSecondary"},"Cleaning ",ta(a,"frequency")," times / week"),r.a.createElement(Ia.a,{light:!0,className:Aa.a.divider}),r.a.createElement("div",{className:Aa.a.row},r.a.createElement(z.a,{variant:"body1",className:Aa.a.semiBold},"Contamination index"),r.a.createElement(z.a,{variant:"body1",className:[Aa.a[function(e){var a="neutral";return e>=60?a="critical":e>=30?a="med":e<30&&(a="good"),a}(a.contamination_index)],Aa.a.medium].join(" ")},a.contamination_index))))},za=t(298),Ha=function(e){var a=e.room,t=e.cleaner,c=e.setCleaner,l=Object(n.useState)({}),o=Object(M.a)(l,2),i=o[0],u=o[1],d=Object(n.useState)(!1),p=Object(M.a)(d,2),f=p[0],E=p[1],g=Object(n.useState)(""),h=Object(M.a)(g,2),b=h[0],v=h[1],_=0!==Object.keys(t).length,j=function(){var e=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(a._id,t._id);case 2:c({}),v("Cleaner unassigned"),E(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(a._id,i._id);case 2:c(i),u({}),v("Cleaner assigned"),E(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(e,a){"clickaway"!==a&&E(!1)};return r.a.createElement(Ta.a,{className:Aa.a.card,style:{height:"min-content"}},r.a.createElement("div",{className:Aa.a.cardContent},r.a.createElement("div",{className:Aa.a.row},r.a.createElement(aa,{variant:function(){if(!_)return"neutral";var e=Ze()(t.shift_start,"HH:mm"),a=Ze()(t.shift_end,"HH:mm");return Ze()().isBetween(e,a)?"good":"critical"}(),size:"tiny",tooltip:"Cleaner name"}),_?r.a.createElement(r.a.Fragment,null,r.a.createElement(Sa.a,{component:Ae.b,style:{marginLeft:16},color:"secondary",to:{pathname:"/cleaners/".concat(t._id),state:{id:t._id}}},r.a.createElement(z.a,{variant:"h6",className:Aa.a.semiBold},t.name)),r.a.createElement(te.a,{title:"Remove assignment"},r.a.createElement(ne.a,{style:{marginLeft:"auto"},size:"small",onClick:j},r.a.createElement(za.a,null)))):r.a.createElement(wa,{onChange:function(e,a){return u(a)},style:{marginLeft:16}})),i&&0!==Object.keys(i).length&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ia.a,{className:Aa.a.divider}),r.a.createElement("div",{className:Aa.a.row},r.a.createElement(V.a,{onClick:w,variant:"contained",color:"secondary",className:Aa.a.btn},"Assign")))),r.a.createElement(be.a,{open:f,autoHideDuration:6e3,onClose:x,anchorOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(ve.a,{variant:"filled",severity:"success",onClose:x},b)))},Fa=Object(sa.a)({root:{lineHeight:"200%"}}),La=function(e){var a=e.reports,t=Fa();return r.a.createElement(Ta.a,{className:Aa.a.comments},r.a.createElement("div",{className:Aa.a.cardContent},r.a.createElement(z.a,{variant:"h6",className:Aa.a.semiBold,style:{marginBottom:16}},"Cleaner comments:"),a.length>0?a.reduce((function(e,a){if(""!==a.comments){var n=Ze()(a.cleaning_time);e.push(r.a.createElement("div",{key:a._id,className:Aa.a.comment},r.a.createElement(Ia.a,null),r.a.createElement(z.a,{variant:"h6",className:t.root},n.format("D MMM, YYYY")),r.a.createElement(z.a,{variant:"h6",className:[Aa.a.semiBold,Aa.a.author,t.root].join(" ")},a.cleaner_name),r.a.createElement(z.a,{variant:"body1",className:t.root},a.comments)))}return e}),[]):r.a.createElement(z.a,{variant:"body1",className:Aa.a.semiBold},"No comments")))},qa=t(299),Wa=t(300),Ga=t(160),Ya=t.n(Ga),Ua=function(e){var a=e.reports,t=e.type,n=Object(o.g)();return r.a.createElement("div",null,r.a.createElement(z.a,{variant:"h5",style:{margin:"16px 0"},className:Ya.a.semiBold},"Past cleaning reports"),a.length>0?r.a.createElement(ie.a,{component:K.a},r.a.createElement(se.a,{size:"small"},r.a.createElement(me.a,null,r.a.createElement(ue.a,null,r.a.createElement(de.a,null,"room"===t?"Cleaner":"Room"),r.a.createElement(de.a,{align:"right"},"Cleaning time"),r.a.createElement(de.a,null,"Cleaning successful"),r.a.createElement(de.a,null,"Action"))),r.a.createElement(pe.a,null,a.map((function(e){return r.a.createElement(ue.a,{key:e._id},r.a.createElement(de.a,{component:"th",scope:"row"},"room"===t?(a=e,r.a.createElement(Sa.a,{component:Ae.b,color:"secondary",to:{pathname:"/cleaners/".concat(a.cleaner_id),state:{id:a.cleaner_id}}},a.cleaner_name)):function(e){return r.a.createElement(Sa.a,{component:Ae.b,color:"secondary",to:{pathname:"/rooms/".concat(e.room_id),state:{id:e.room_id}}},e.room_name)}(e)),r.a.createElement(de.a,{align:"right"},Ze()(e.cleaning_time).format("DD.MM.YYYY HH:mm")),r.a.createElement(de.a,null,e.cleaning_succesful?r.a.createElement(qa.a,{className:Ya.a.good}):r.a.createElement(Wa.a,{color:"error"})),r.a.createElement(de.a,null,r.a.createElement(ne.a,{size:"small",color:"secondary",onClick:function(){!function(e){var a=e._id;n.push({pathname:"/rooms/reports/".concat(a),state:{id:a}})}(e)}},r.a.createElement(Ee.a,null))));var a}))))):r.a.createElement(z.a,{variant:"h6"},"No cleaning Reports"))},Ja=function(){var e=Object(o.h)(),a=Object(o.g)(),t=e.state,c=Object(n.useState)(!1),l=Object(M.a)(c,2),i=l[0],s=l[1],m=Object(n.useState)({}),u=Object(M.a)(m,2),d=u[0],p=u[1],f=Object(n.useState)([]),E=Object(M.a)(f,2),g=E[0],h=E[1],v=Object(n.useState)({}),_=Object(M.a)(v,2),y=_[0],O=_[1],w=Object(n.useState)(!1),x=Object(M.a)(w,2),S=x[0],N=x[1],k=Object(n.useState)(!1),R=Object(M.a)(k,2),D=R[0],B=R[1],A=Object(n.useState)(""),T=Object(M.a)(A,2),I=T[0],H=T[1];Object(n.useEffect)((function(){j(t.id).then((function(e){p(e),s(!0)}),(function(e){return console.log(e)})),b(t.id).then((function(e){e.length>=1&&O(e[0])}),(function(e){return console.log(e)})),C(t.id).then((function(e){h(e.sort((function(e,a){return new Date(a.cleaning_time)-new Date(e.cleaning_time)})))}))}),[t.id]),Object(n.useEffect)((function(){S&&P(t.id,"contamination").then((function(e){var a=document.getElementById("aux"),t=document.getElementById("main");ra(new BigUint64Array(e),a,t)})).catch((function(e){console.log(e.message),H(e.message),B(!0)}))}),[t.id,S]);return r.a.createElement(L,{style:{width:"65%"}},i?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Aa.a.titleRow},r.a.createElement(z.a,{variant:"h4"},"Room: ",d.name),r.a.createElement(V.a,{variant:"text",onClick:function(){a.push({pathname:"/rooms",state:{id:t.id,action:"show"}})},size:"small"},"Show on map")),r.a.createElement("div",{className:Aa.a.content},r.a.createElement("div",{className:Aa.a.detailsRow},r.a.createElement(Ma,{room:d}),r.a.createElement(Ha,{room:d,cleaner:y,setCleaner:O})),r.a.createElement(La,{reports:g}),r.a.createElement("div",{className:Aa.a.row},r.a.createElement(z.a,{variant:"h5"},"Room map"),r.a.createElement(V.a,{variant:"outlined",color:"primary",onClick:function(){return N(!S)}},S?"Hide map":"Show Map")),S&&r.a.createElement(r.a.Fragment,null,r.a.createElement("canvas",{id:"aux",style:{display:"none"}}),r.a.createElement("canvas",{id:"main",width:72,height:56,className:Aa.a.map})),r.a.createElement(Ua,{reports:g,type:"room"}))):r.a.createElement(_e.a,{color:"secondary",style:{margin:"16px auto"}}),r.a.createElement(be.a,{open:D,autoHideDuration:6e3,onClose:function(){return B(!1)}},r.a.createElement(ve.a,{onClose:function(){return B(!1)},severity:"error"},I)))},Xa=t(302),Va=t(304),Qa=t(305),Ka=t(307),Za=Ua,$a=t(70),et=t.n($a),at=t(177),tt=t(301),nt=t(303),rt=t(306),ct=Q.a({name:Q.b().required()}),lt=function(e){var a=e.cleaner,t=e.open,n=e.setOpen,c=e.onSave,l=function(){n(!1)},o=a.shift_start.split(":"),i=a.shift_end.split(":"),u={name:a.name,startHour:o.length>0?o[0]:"",endHour:i.length>0?i[0]:"",startMinutes:o.length>0?o[1]:"",endMinutes:i.length>0?i[1]:""},d=function(){var e=Object(m.a)(s.a.mark((function e(t,r){var l,o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=r.setSubmitting,(o=t)._id=a._id,o.shift_start="".concat(t.startHour.padStart(2,"0"),":").concat(t.startMinutes.padStart(2,"0")),o.shift_end="".concat(t.endHour.padStart(2,"0"),":").concat(t.endMinutes.padStart(2,"0")),e.next=7,D(o);case 7:i=e.sent,console.log(i),l(!1),n(!1),c();case 12:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}();return r.a.createElement(re.a,{open:t,onClose:l,"aria-labelledby":"form-dialog-title"},r.a.createElement(ce.a,{id:"form-dialog-title"},"Edit cleaner"),r.a.createElement(X.c,{initialValues:u,onSubmit:d,validationSchema:ct},(function(e){e.isSubmitting,e.resetForm,e.values;return r.a.createElement(X.b,null,r.a.createElement(le.a,null,r.a.createElement(G.a,{container:!0,spacing:2},r.a.createElement(G.a,{item:!0,xs:12},r.a.createElement(X.a,{component:J.b,margin:"dense",id:"name",label:"Name",type:"text",name:"name",fullWidth:!0})),r.a.createElement(xe,null))),r.a.createElement(oe.a,null,r.a.createElement(V.a,{onClick:l,color:"primary"},"Cancel"),r.a.createElement(V.a,{type:"submit",color:"primary"},"Save")))})))},ot=function(e){var a=e.cleaner,t=e.setSnackOpen,c=e.setSnackText,l=Object(n.useState)([]),o=Object(M.a)(l,2),i=o[0],u=o[1],d=Object(n.useState)(!0),p=Object(M.a)(d,2),f=p[0],E=p[1];Object(n.useEffect)((function(){h(a._id).then((function(e){console.log(e),u(e),E(!1)}),(function(e){console.log(e)}))}),[a]);var g=function(){var e=Object(m.a)(s.a.mark((function e(n){var r,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(n._id,a._id);case 2:r=e.sent,console.log(r),(l=Object(ye.a)(i)).splice(i.indexOf(n),1),u(l),c("Assignment removed"),t(!0);case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("div",{style:{margin:"16px 0"}},f?r.a.createElement(_e.a,{color:"secondary"}):i.length>0?r.a.createElement(ie.a,{component:K.a},r.a.createElement(se.a,{size:"small"},r.a.createElement(me.a,null,r.a.createElement(ue.a,null,r.a.createElement(de.a,null,"Room"),r.a.createElement(de.a,{align:"right"},"Status"),r.a.createElement(de.a,{align:"right"},"Contamination Index"),r.a.createElement(de.a,{align:"right"},"Room type"),r.a.createElement(de.a,{align:"right"},"Cleaning Status"),r.a.createElement(de.a,null,"Action"))),r.a.createElement(pe.a,null,i.map((function(e){return r.a.createElement(ue.a,{key:e._id},r.a.createElement(de.a,{component:"th",scope:"row"},e.name),r.a.createElement(de.a,{align:"right"},na(e.contamination_index)),r.a.createElement(de.a,{align:"right"},e.contamination_index),r.a.createElement(de.a,{align:"right"},ta(e,"displayName")),r.a.createElement(de.a,{align:"right"},e.is_cleaning?"Cleaning in progress":"Needs cleaning"),r.a.createElement(de.a,null,r.a.createElement(te.a,{title:"Remove assignment"},r.a.createElement(ne.a,{size:"small",onClick:function(){g(e)}},r.a.createElement(Ka.a,{color:"error"})))))}))))):r.a.createElement(z.a,{variant:"h6"},"No assigned rooms"))},it=function(){var e=Object(o.h)(),a=Object(o.g)(),t=e.state,c=Object(n.useState)(!1),l=Object(M.a)(c,2),i=l[0],u=l[1],d=Object(n.useState)(!1),p=Object(M.a)(d,2),f=p[0],E=p[1],g=Object(n.useState)({}),h=Object(M.a)(g,2),b=h[0],v=h[1],_=Object(n.useState)([]),y=Object(M.a)(_,2),O=y[0],j=y[1],w=r.a.useState(null),S=Object(M.a)(w,2),k=S[0],R=S[1],P=r.a.useState(!1),D=Object(M.a)(P,2),B=D[0],A=D[1],T=r.a.useState(!1),I=Object(M.a)(T,2),H=I[0],F=I[1],q=Object(n.useState)(!1),W=Object(M.a)(q,2),G=W[0],Y=W[1],U=Object(n.useState)("Cleaned deleted"),J=Object(M.a)(U,2),X=J[0],Q=J[1],K=function(){A(!1)},Z=function(){R(null)},$=function(){var e=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(b._id);case 2:Q("Cleaner Deleted"),Y(!0),a.goBack();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(e,a){"clickaway"!==a&&Y(!1)};return Object(n.useEffect)((function(){x(t.id).then((function(e){console.log(e),v(e),u(!0)}),(function(e){console.log(e)})),C(null,t.id).then((function(e){j(e.sort((function(e,a){return new Date(a.cleaning_time)-new Date(e.cleaning_time)})))}))}),[t.id,H]),r.a.createElement(L,{style:{textAlign:"start"}},r.a.createElement("div",{className:et.a.row,style:{justifyContent:"space-between"}},r.a.createElement(z.a,{variant:"h5",className:et.a.semiBold},"Cleaner details"),r.a.createElement(V.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){R(e.currentTarget)},variant:"outlined",color:"primary"},"Actions"),r.a.createElement(at.a,{id:"simple-menu",anchorEl:k,keepMounted:!0,open:Boolean(k),onClose:Z},r.a.createElement(Oe.a,{onClick:function(){Z(),E(!0)}},r.a.createElement(tt.a,null,r.a.createElement(Xa.a,{fontSize:"small",style:{color:"#808080"}})),r.a.createElement(nt.a,{primary:"Edit cleaner"})),r.a.createElement(Oe.a,{onClick:function(){A(!0),Z()}},r.a.createElement(tt.a,null,r.a.createElement(Va.a,{color:"error",fontSize:"small"})),r.a.createElement(nt.a,{primary:"Delete cleaner"})))),i?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:[et.a.row,et.a.content].join(" ")},r.a.createElement(Qa.a,{className:et.a.avatar}),r.a.createElement("div",null,r.a.createElement(z.a,{variant:"h6",className:et.a.semiBold},"Cleaner name: ",b.name),r.a.createElement(z.a,{variant:"body1",color:"textSecondary"},"Shift: ",b.shift_start," - ",b.shift_end))),r.a.createElement(z.a,{variant:"h5",className:et.a.semiBold},"Assigned Rooms"),r.a.createElement(ot,{cleaner:b,setSnackOpen:Y,setSnackText:Q}),r.a.createElement(Za,{reports:O,type:"cleaner"})):r.a.createElement(_e.a,{color:"secondary",style:{margin:"16px auto"}}),r.a.createElement(re.a,{open:B,onClose:K,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(ce.a,{id:"alert-dialog-title"},"Delete cleaner"),r.a.createElement(le.a,null,r.a.createElement(rt.a,{id:"alert-dialog-description"},"Are you sure you want to delete the cleaner?")),r.a.createElement(oe.a,null,r.a.createElement(V.a,{onClick:K,color:"primary"},"Cancel"),r.a.createElement(V.a,{onClick:function(){K(),$()},color:"primary",autoFocus:!0},"Delete"))),i&&r.a.createElement(lt,{cleaner:b,open:f,setOpen:E,onSave:function(){Q("Saved"),Y(!0),F(!0)}}),r.a.createElement(be.a,{open:G,autoHideDuration:6e3,onClose:ee,anchorOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(ve.a,{variant:"filled",severity:"success",onClose:ee},X)))},st=t(34),mt=t.n(st),ut=function(){var e=Object(o.h)().state.id,a=Object(n.useState)({}),t=Object(M.a)(a,2),c=t[0],l=t[1],i=Object(n.useState)(""),u=Object(M.a)(i,2),d=u[0],p=u[1],f=Object(n.useState)(!1),E=Object(M.a)(f,2),g=E[0],h=E[1],b=Object(n.useState)(""),v=Object(M.a)(b,2),_=v[0],y=v[1];Object(n.useEffect)((function(){k(e).then((function(e){l(e)}))}),[e]);var O=function(){var a=Object(m.a)(s.a.mark((function a(t){return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return p(t.target.value),a.next=3,R(e,t.target.value).then((function(e){ra(e,document.getElementById("aux"),document.getElementById("main"))})).catch((function(e){console.error(e),y("Could not load map"),h(!0)}));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement(L,{style:{textAlign:"start"}},r.a.createElement(z.a,{variant:"h4",className:mt.a.semiBold},"Cleaning report details"),r.a.createElement(G.a,{container:!0,spacing:2},r.a.createElement(G.a,{item:!0,xs:6},r.a.createElement("div",{className:mt.a.row,style:{justifyContent:"space-between"}},r.a.createElement(z.a,{variant:"h5"},"Room map"),r.a.createElement(Xe.a,{variant:"outlined",style:{minWidth:"320px",marginBottom:8}},r.a.createElement(Ve.a,{id:"demo-simple-select-outlined-label"},"Contamination map type"),r.a.createElement(Qe.a,{label:"Contamination map type",onChange:O,value:d},r.a.createElement(Oe.a,{value:"clean"},"After cleaning"),r.a.createElement(Oe.a,{value:"contamination"},"Before cleaning")))),r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement("canvas",{id:"aux",style:{display:"none"}}),r.a.createElement("canvas",{id:"main",width:72,height:56,className:mt.a.map})),r.a.createElement(z.a,{variant:"h5"},"Cleaner comments:"),r.a.createElement("div",{className:mt.a.comments},r.a.createElement(z.a,{variant:"body1",className:mt.a.comment},c.comments))),r.a.createElement(G.a,{item:!0,xs:6},r.a.createElement("div",{className:mt.a.row},r.a.createElement(z.a,{variant:"h5",className:mt.a.reportInfo},"Cleaner:"),r.a.createElement(z.a,{style:{marginLeft:"4px"},variant:"h5"},c.cleaner_name)),r.a.createElement("div",{className:mt.a.row},r.a.createElement(z.a,{variant:"h5",className:mt.a.reportInfo},"Cleaning time:"),r.a.createElement(z.a,{style:{marginLeft:"4px"},variant:"h5"},c.cleaning_time)),r.a.createElement("div",{className:mt.a.row},r.a.createElement(z.a,{variant:"h5",className:mt.a.reportInfo},"Contamination index:"),r.a.createElement(z.a,{style:{marginLeft:"4px"},variant:"h5"},"75")),r.a.createElement("div",{className:mt.a.row},r.a.createElement(z.a,{variant:"h5",className:mt.a.reportInfo},"Cleaning successful:"),r.a.createElement("div",{style:{marginLeft:4,height:35}},c.cleaning_succesful?r.a.createElement(qa.a,{className:mt.a.good,fontSize:"large"}):r.a.createElement(Wa.a,{color:"error",fontSize:"large"}))))),r.a.createElement(be.a,{open:g,autoHideDuration:6e3,onClose:function(){return h(!1)}},r.a.createElement(ve.a,{onClose:function(){return h(!1)},severity:"error"},_)))};var dt=function(){var e=Object(o.h)();return r.a.createElement("div",{className:"App"},"/"!==e.pathname&&r.a.createElement(Ue,null),r.a.createElement(o.d,{location:e},r.a.createElement(o.b,{path:"/dashboard",render:function(){return f()?r.a.createElement(U,null):r.a.createElement(o.a,{to:"/"})}}),r.a.createElement(o.b,{path:"/cleaners/:id",render:function(){return f()?r.a.createElement(it,null):r.a.createElement(o.a,{to:"/"})}}),r.a.createElement(o.b,{path:"/cleaners",render:function(){return f()?r.a.createElement(ke,null):r.a.createElement(o.a,{to:"/"})}}),r.a.createElement(o.b,{path:"/assignments",render:function(){return f()?r.a.createElement(Da,null):r.a.createElement(o.a,{to:"/"})}}),r.a.createElement(o.b,{path:"/rooms/reports/:id",render:function(){return f()?r.a.createElement(ut,null):r.a.createElement(o.a,{to:"/"})}}),r.a.createElement(o.b,{path:"/rooms/:id",render:function(){return f()?r.a.createElement(Ja,null):r.a.createElement(o.a,{to:"/"})}}),r.a.createElement(o.b,{path:"/rooms",render:function(){return f()?r.a.createElement(la,null):r.a.createElement(o.a,{to:"/"})}}),r.a.createElement(o.b,{path:"/analysis",render:function(){return f()?r.a.createElement(Je,null):r.a.createElement(o.a,{to:"/"})}}),r.a.createElement(o.b,{path:"/",render:function(){return f()?r.a.createElement(o.a,{to:"/dashboard"}):r.a.createElement(ae,null)}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pt=t(308),ft=t(311),Et=t(312),gt=t(309),ht=t(310),bt=Object(pt.a)({palette:{primary:{main:gt.a[900]},secondary:ht.a},typography:{fontFamily:["Raleway","sans-serif"]}});l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ae.a,{basename:"/spotless"},r.a.createElement(ft.a,{theme:bt},r.a.createElement(Et.b,{injectFirst:!0},r.a.createElement(dt,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},34:function(e,a,t){e.exports={row:"ReportPage_row__1XU8D",semiBold:"ReportPage_semiBold__20bHc",reportInfo:"ReportPage_reportInfo__KuWwG",column:"ReportPage_column__1fkvo",good:"ReportPage_good__IEB1u",map:"ReportPage_map__1ruE5",comments:"ReportPage_comments__vvAhd",comment:"ReportPage_comment__38N5l"}},47:function(e,a,t){e.exports={toolbar:"Toolbar_toolbar__1Bm9j",name:"Toolbar_name__3EvOQ",svg:"Toolbar_svg__3XlL9",tab:"Toolbar_tab__3uwiV"}},70:function(e,a,t){e.exports={content:"CleanerDetailsPage_content__3PEfI",avatar:"CleanerDetailsPage_avatar__3KDG8",row:"CleanerDetailsPage_row__G0VOc",menu:"CleanerDetailsPage_menu__2gyF8",column:"CleanerDetailsPage_column__3374X",semiBold:"CleanerDetailsPage_semiBold__1F3iu"}},80:function(e,a,t){e.exports={semiBold:"DashboardPage_semiBold__1wP56",stat:"DashboardPage_stat__1HNGL",keyStat:"DashboardPage_keyStat__3TqkO",subtitle:"DashboardPage_subtitle__SKIyw"}},82:function(e,a,t){e.exports={headerRow:"CleanersPage_headerRow__20bGG",bold:"CleanersPage_bold__qIG9F",menu:"CleanersPage_menu__1x8Ct",row:"CleanersPage_row__2H2UE"}}},[[192,1,2]]]);
//# sourceMappingURL=main.8e88b116.chunk.js.map